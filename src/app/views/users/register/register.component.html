<main>
    <div class="container mt-5">
        <h1 class="text-center mb-4">Registro de {{ isAdmin ? "Técnico" : "Paciente" }}</h1>
        <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate class="bg-2 animate-slideUp">

            <div class="mb-3">
                <label for="fullName" class="form-label">Nombre completo</label>
                <input id="fullName" type="text" formControlName="fullName" class="form-control" placeholder="Elizabeth Mendez">
                <div class="text-error" *ngIf="form.get('fullName')?.touched && form.get('fullName')?.invalid">
                    Campo obligatorio
                </div>
            </div>

                <!-- *ngIf="form.get('email')?.touched && form.get('email')?.invalid" -->
            <div class="mb-3">
                <label for="email" class="form-label">Correo electrónico</label>
                <input id="email" type="email" formControlName="email" class="form-control" placeholder="ejemplo@email.com">
                <div class="text-error" *ngIf="form.get('email')?.touched && form.get('email')?.invalid">
                    Ingresa un email válido
                </div>
            </div>

            <div class="mb-3">
                <label for="phone" class="form-label">Teléfono</label>
                <input id="phone" type="phone" formControlName="phone" class="form-control" placeholder="9 dígitos ej: 987654321">
                <div class="text-error" *ngIf="form.get('phone')?.touched && form.get('phone')?.invalid">
                    Ingresa un teléfono válido
                </div>
            </div>

            <div class="mb-3">
                <label for="password" class="form-label">Contraseña</label>
                <input id="password" type="password" formControlName="password" class="form-control" placeholder="••••••">
                <div class="text-error" *ngIf="form.get('password')?.touched && form.get('password')?.invalid">
                    La contraseña debe tener al menos 6 caracteres
                </div>
            </div>

            <div class="mb-3">
                <label for="password2" class="form-label">Repite la contraseña</label>
                <input id="password2" type="password" formControlName="password2" class="form-control" placeholder="••••••">
                <div class="text-error" *ngIf="form.get('password2')?.touched && form.get('password2')?.errors">
                    <div *ngIf="form.get('password2')?.errors?.['required']">
                        Debe repetir la contraseña.
                    </div>
                    <div *ngIf="form.get('password2')?.errors?.['contrasenasNoCoinciden']">
                        Las contraseñas no coinciden.
                    </div>
                </div>
            </div>

            <div *ngIf="mensajeError" class="alert alert-danger mt-3 text-center">
                {{ mensajeError }}
            </div>

            <div *ngIf="mensajeOk" class="alert alert-success mt-3 text-center">
                {{ mensajeOk }}
            </div>

            <div class="d-flex justify-content-between">
                <button type="submit" class="btn btn-1">Registrar</button>
                <button type="reset" class="btn btn-3">Limpiar</button>
            </div>

            <div class="text-center mt-3">
                <a routerLink="/login" class="btn-outline">Volver a inicio de sesión</a>
            </div>
        </form>
    </div>
    <div class="toast-container position-fixed top-0 start-50 translate-middle-x p-3">
        <div id="toastRegistro" class="toast align-items-center text-bg-primary border-0" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="d-flex">
                <div class="toast-body"></div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
        </div>
    </div>
</main>